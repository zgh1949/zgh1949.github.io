## 问题

10000连接需要把连接池设置成 10000吗？

## 分析

显然不是。

使用连接池时，因为CPU计算与IO的速度差几个量级，当进行IO时，CPU可以选择下一个任务先执行，这样充分利用了CPU的资源。但是CPU切换任务也是需要消耗资源的，如果无限制增加任务数量，将会导致更加频繁的任务切换。因此需要找到一个平衡点：CPU既忙碌，又没有过多的任务切换。PostgreSQL提供了一个经验公式：

$$连接数=核心数*2 + 磁盘数$$



[参考文章](https://www.modb.pro/db/131426)